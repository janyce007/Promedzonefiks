<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>PromedZone ‚Äî Event & Info</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Playfair+Display:wght@400;600;700&family=Bricolage+Grotesque:wght@700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

<style>
:root{
  --accent:#1652ff;
  --accent-2:#ffd24d;
  --bg-1:#e8f2ff; 
  --bg-2:#fff8e6; 
  --muted:#6b7280;
  --text-dark:#0b1221;
  --bg-about:#0f1e52; 
  --calendar-blue: #1652ff; 
  --neon-blue: #00fffb; 
  /* New variable for metal theme */
  --metal-dark: #2c2c2c;
  --metal-light: #e6e6e6;
}
*{box-sizing:border-box;margin:0;padding:0}
html { scroll-behavior: smooth; }
body{
  font-family:"Inter",sans-serif;
  background:linear-gradient(180deg,var(--bg-1),var(--bg-2));
  color:var(--text-dark);
  overflow-x:hidden;
}

/* NAV */
.nav{
  position:fixed;top:20px;left:24px;z-index:50;
  display:flex;gap:12px;align-items:center;
  background:rgba(255,255,255,0.6);backdrop-filter:blur(6px);
  padding:10px 14px;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,0.05);
  cursor: pointer;
  transition: transform 0.2s ease;
}
.nav:active { transform: scale(0.95); }
.logo-mark{
  width:36px;height:36px;border-radius:10px;
  background:linear-gradient(135deg,var(--accent),#3ea0ff);
  display:flex;align-items:center;justify-content:center;
  color:white;font-weight:700;font-family:"Playfair Display";
}

/* PAGE TRANSITIONS */
.page{
  position:absolute; 
  top: 0; left: 0; width: 100%;
  min-height: 100vh;
  opacity:0;
  pointer-events:none;
  transition:opacity .8s cubic-bezier(0.25, 1, 0.5, 1), transform .8s cubic-bezier(0.25, 1, 0.5, 1);
  padding-top:80px;
  transform: translateY(20px); 
  background: transparent;
}
.page.active{opacity:1;pointer-events:auto;transform:translateY(0);}

/* HOME PAGE STYLING */
#home.page { padding-top: 0; }

/* LANDING SECTION */
.landing-section {
    height: 100vh;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2072&auto=format&fit=crop') no-repeat center center/cover;
    position: relative;
}
.landing-section::before {
    content: '';
    position: absolute; inset: 0;
    background: linear-gradient(135deg, rgba(15, 30, 82, 0.8), rgba(22, 82, 255, 0.4));
    backdrop-filter: blur(2px);
}
.landing-content {
    position: relative;
    z-index: 10;
    text-align: center;
    color: white;
    max-width: 600px;
    padding: 50px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 40px;
    backdrop-filter: blur(20px);
    box-shadow: 0 20px 50px rgba(0,0,0,0.3);
    animation: fadeIn 1.2s ease-out;
}
@keyframes fadeIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

.landing-content h1 {
    font-family: "Bricolage Grotesque";
    font-size: 64px;
    margin-bottom: 10px;
    line-height: 1;
    text-shadow: 0 0 20px rgba(22, 82, 255, 0.6);
}
.landing-content p {
    font-size: 18px;
    color: rgba(255, 255, 255, 0.8);
    margin-bottom: 40px;
}
.explore-btn {
    background: var(--accent);
    color: white;
    border: none;
    padding: 18px 40px;
    border-radius: 50px;
    font-size: 18px;
    font-weight: 600;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 12px;
    box-shadow: 0 0 20px rgba(22, 82, 255, 0.6), 0 0 0 4px rgba(22, 82, 255, 0.2);
    transition: all 0.3s ease;
}
.explore-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 0 40px rgba(22, 82, 255, 0.9), 0 0 0 6px rgba(22, 82, 255, 0.4);
    background: #306aff;
}
.explore-btn i { transition: transform 0.3s; }
.explore-btn:hover i { transform: translateX(5px); }

/* ROADMAP SECTION */
.roadmap-section {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 80px 20px;
    background: linear-gradient(180deg,var(--bg-1),var(--bg-2));
}
.roadmap-section h1 { font-family:"Bricolage Grotesque"; font-size:52px; color:#041735; margin:0; }
.roadmap-section span { color:var(--accent-2); }
.roadmap-section p { margin-top:16px; font-size:18px; color:var(--text-dark); }

/* ROADMAP BUTTONS & ICONS */
.roadmap { position: relative; width: 90%; max-width: 1000px; height: 400px; margin: 60px auto 0; overflow: visible; display: flex; justify-content: space-around; align-items: center; }
.roadmap-svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
.roadmap-path { fill: none; stroke: var(--accent); stroke-width: 40; stroke-linecap: round; stroke-linejoin: round; }
.roadmap-dashed-outline { fill: none; stroke: var(--accent-2); stroke-width: 2; stroke-dasharray: 8 8; stroke-linecap: round; transform: translate(2px, 2px); }
.arrowhead { fill: var(--accent); }
.road-step-wrapper { position: absolute; z-index: 10; display: flex; flex-direction: column; align-items: center; text-align: center; transform: translate(-50%, -50%); }
.road-step-wrapper:nth-child(2) { top: 38%; left: 10%; } 
.road-step-wrapper:nth-child(3) { top: 25%; left: 30%; } 
.road-step-wrapper:nth-child(4) { top: 40%; left: 50%; } 
.road-step-wrapper:nth-child(5) { top: 25%; left: 70%; } 
.road-step-wrapper:nth-child(6) { top: 40%; left: 90%; } 

.road-icon { 
    width: 55px; 
    height: 55px; 
    border-radius: 50%; 
    background-color: var(--accent-2); 
    border: 4px solid white; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    color: var(--accent); 
    font-size: 22px; 
    box-shadow: 0 0 0 5px rgba(255, 255, 255, 0.7), 0 2px 5px rgba(0,0,0,0.2); 
    margin-bottom: 8px; 
    transition: transform .3s; 
    cursor: pointer; 
}
.road-icon:hover {
    transform: scale(1.1); 
}

.step { 
  background: var(--accent); 
  color: white; 
  padding: 8px 15px; 
  border-radius: 8px; 
  font-weight: 600; 
  cursor: pointer; 
  box-shadow: 0 4px 10px rgba(0,0,0,0.1); 
  white-space: nowrap; 
  font-size: 14px; 
  transition: transform .3s, box-shadow .3s, background .3s; 
  transform: none !important; 
  box-shadow: 0 4px 10px rgba(0,0,0,0.1) !important;
}
.step.active { background: var(--accent); box-shadow: 0 8px 15px rgba(22,82,255,0.4); transform: scale(1.05); }
.step:hover:not(.active) { transform: scale(1.03); box-shadow: 0 6px 12px rgba(22,82,255,0.3); }

/* CALENDAR CSS */
#calendar {
  padding: 80px 20px;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
}
#calendar h2 {
    font-family:"Bricolage Grotesque";
    font-size: 40px;
    color: var(--text-dark);
    margin-bottom: 10px;
}
#calendar .calendar-wrapper {
    max-width: 450px;
    width: 100%;
    margin-top: 20px;
    background: white;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    padding: 20px;
}
.calendar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
    margin-bottom: 15px;
    color: var(--calendar-blue);
}
.calendar-header button {
    background: none;
    border: none;
    font-size: 1.5rem;
    color: var(--calendar-blue);
    cursor: pointer;
    padding: 5px;
}
.calendar-title {
    font-size: 1.5rem;
    font-weight: 700;
    text-align: center;
}
.calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 5px;
    text-align: center;
    font-size: 14px;
}
.calendar-day-name {
    font-weight: 600;
    color: var(--muted);
    padding: 8px 0;
}
.calendar-date {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 40px;
    width: 100%;
    border-radius: 50%;
    cursor: default;
    position: relative;
    transition: background 0.2s;
}
.calendar-date.event-date {
    color: var(--text-dark); 
    font-weight: 600;
    cursor: pointer;
}
.calendar-date.event-date:hover {
    background: var(--bg-1); 
}
.calendar-date.inactive {
    color: #ccc;
}
.event-dot {
    position: absolute;
    bottom: 5px; 
    left: 50%;
    transform: translateX(-50%);
    width: 6px;
    height: 6px;
    background: var(--accent); 
    border-radius: 50%;
    opacity: 1; 
}
.event-date .event-dot {
    display: block; 
}
.event-list-container {
    max-width: 450px;
    width: 100%;
    margin-top: 30px;
}
.event-list-container h3 {
    font-family:"Bricolage Grotesque";
    font-size: 24px;
    margin-bottom: 15px;
    color: var(--text-dark);
}
.event-item {
    background: white;
    padding: 15px;
    margin-bottom: 10px;
    border-radius: 12px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    border-left: 5px solid var(--accent);
    cursor: pointer;
    transition: transform 0.2s;
}
.event-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}
.event-item h4 {
    margin: 0;
    font-size: 16px;
    color: var(--text-dark);
    font-weight: 700;
}
.event-item p {
    margin: 5px 0 0;
    font-size: 12px;
    color: var(--muted);
}

/* DETAIL PAGES GENERIC */
#event-detail, #work-detail, #promed-nav, #promed-about-detail, #promed-peminatan-detail, #peminatan-single-detail-temp, #dosen {
    padding: 80px 20px;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}
.detail-card {
    max-width: 700px;
    width: 100%;
    background: white;
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    text-align: left;
    margin-top: 30px;
}
.detail-card h2 {
    font-family: "Bricolage Grotesque";
    font-size: 36px;
    color: var(--accent);
    margin-bottom: 20px;
    text-align: center;
}
#promed-nav .nav-icon-container {
    display: flex;
    justify-content: center;
    gap: 30px; /* Adjusted gap for 3 items */
    margin-top: 40px;
    max-width: 800px; /* Increased max-width */
    flex-wrap: wrap;
}
#promed-nav .nav-item {
    cursor: pointer;
    text-align: center;
    transition: transform 0.3s, box-shadow 0.3s;
    width: 160px;
    padding: 20px;
    border-radius: 15px;
    background: white;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    border: 1px solid #eee;
}
#promed-nav .nav-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(22, 82, 255, 0.3); 
}
#promed-nav .nav-item i {
    font-size: 3rem;
    color: var(--accent);
    margin-bottom: 10px;
}
#promed-nav .nav-item p {
    font-weight: 700;
    color: var(--text-dark);
    margin: 0;
    font-size: 14px;
}

/* Peminatan */
#promed-peminatan-detail .detail-card {
    max-width: 1000px;
}
#promed-peminatan-detail .peminatan-list {
    margin-top: 20px;
    width: 100%;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
}
#promed-peminatan-detail .peminatan-item-box {
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    transition: all 0.3s ease-in-out;
    position: relative;
    overflow: hidden;
    cursor: pointer;
}
#promed-peminatan-detail .peminatan-item-box:hover {
    transform: none;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
#promed-peminatan-detail .peminatan-item-box .content {
    padding: 15px;
    text-align: center;
}
#promed-peminatan-detail .peminatan-item-box .image-placeholder {
    width: 100%;
    height: 120px;
    background: var(--accent-2);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-dark);
    font-size: 14px;
    font-weight: 600;
    border-radius: 12px 12px 0 0;
}
#promed-peminatan-detail .peminatan-item-box h4 {
    font-family: "Bricolage Grotesque";
    font-size: 16px;
    color: var(--text-dark);
    margin-top: 0;
    margin-bottom: 5px;
    word-break: break-word; 
    line-height: 1.2;
}
#promed-peminatan-detail .peminatan-item-box .content p {
    display: none;
}
#promed-peminatan-detail .peminatan-item-box .hover-popup {
    display: none !important;
    opacity: 0 !important;
    pointer-events: none !important;
}

/* Dosen */
#dosen {
    padding: 0; /* Remove padding to handle sections better */
}
/* NEW: Arch/Semi-Circle Section (Refined Design) */
.dosen-arch-wrapper {
    width: 100%;
    height: 100vh; /* Full screen feel */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: #0b0d14; /* Very dark bg from reference */
    color: white;
    padding: 40px 20px;
    position: relative;
    overflow: hidden;
}
.dosen-arch-wrapper h2 {
    font-family: "Bricolage Grotesque";
    font-size: 48px;
    margin-bottom: 10px;
    z-index: 10;
    text-align: center;
}
.dosen-arch-wrapper p {
    color: rgba(255,255,255,0.6);
    margin-bottom: 20px;
    z-index: 10;
    font-size: 16px;
    text-align: center;
    max-width: 600px;
}
.arch-scene {
    width: 100%;
    height: 500px; /* Enough height for arch */
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 20px;
}
/* The specific rectangular card style for the arch */
.arch-item {
    position: absolute;
    width: 120px; /* Portrait rectangle width */
    height: 160px; /* Portrait rectangle height */
    border-radius: 16px; /* Rounded corners */
    cursor: pointer;
    transition: transform 0.3s ease, box-shadow 0.3s ease, z-index 0.3s;
    overflow: hidden;
    background: #222;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    border: 1px solid rgba(255,255,255,0.1);
    will-change: transform, left, top;
}
/* Pop-up on hover */
.arch-item:hover {
    transform: scale(1.5) !important; /* Scale up significantly */
    z-index: 999 !important; /* Bring to front */
    box-shadow: 0 20px 50px rgba(22, 82, 255, 0.6);
    border-color: var(--accent);
}
.arch-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    pointer-events: none; /* Prevent img drag interfering */
}
.scroll-indicator {
    position: absolute;
    bottom: 30px;
    animation: bounce 2s infinite;
    opacity: 0.7;
    font-size: 24px;
    cursor: pointer;
}
@keyframes bounce {
  0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
  40% {transform: translateY(-10px);}
  60% {transform: translateY(-5px);}
}

/* Existing Dosen Grid Section */
.dosen-grid-wrapper {
    padding: 80px 20px;
    width: 100%;
    background: linear-gradient(180deg,var(--bg-1),var(--bg-2));
    display: flex;
    flex-direction: column;
    align-items: center;
}
.dosen-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 25px;
    max-width: 1200px;
    width: 100%;
}
.dosen-card {
    background: white;
    padding: 15px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    transition: transform 0.3s;
    cursor: pointer;
    overflow: hidden;
    text-align: center;
    border: 1px solid #ddd;
    display: flex;
    flex-direction: column;
    height: 100%;
    scroll-margin-top: 100px; /* Spacing for smooth scroll */
}
.dosen-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
}
.dosen-image-placeholder {
    width: 100%;
    height: 150px;
    background-color: var(--bg-about);
    border-radius: 8px;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 14px;
    font-weight: 600;
}
/* Style untuk gambar dosen */
.dosen-image-real {
    width: 100%;
    height: 150px;
    object-fit: cover;
    border-radius: 8px;
    margin-bottom: 10px;
}

.dosen-card h4 {
    font-size: 16px;
    margin: 0;
    color: var(--text-dark);
    line-height: 1.2;
    word-break: break-word;
}
.dosen-card p {
    font-size: 12px;
    color: var(--muted);
    margin-top: 4px;
    margin-bottom: 10px; 
}
.dosen-social-links {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: auto;
    align-items: center;
    padding-top: 10px;
}
.dosen-social-links a {
    color: var(--muted);
    font-size: 1.2rem;
    transition: color 0.2s;
    display: flex;
    align-items: center;
}
.dosen-social-links a:hover {
    color: var(--accent);
}

/* Details */
.detail-info {
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 1px solid #eee;
}
.detail-info p {
    margin-bottom: 10px;
    font-size: 16px;
    color: var(--text-dark);
}
.detail-info strong {
    color: var(--text-dark);
    font-weight: 700;
    display: inline-block;
    min-width: 90px;
}
.detail-description {
    line-height: 1.7;
    font-size: 16px;
    color: var(--text-dark);
    text-align: justify;
}
.detail-description p {
    margin-bottom: 15px;
}
.detail-description a {
    color: var(--accent);
    text-decoration: none;
    font-weight: 600;
}
.detail-description a:hover {
    text-decoration: underline;
}
.media-container {
    width: 100%;
    margin-top: 20px;
    margin-bottom: 20px;
    position: relative;
    padding-bottom: 56.25%; /* 16:9 */
    height: 0;
    overflow: hidden;
    background: #000;
    border-radius: 10px;
}
.media-container iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0;
}
.work-detail-footer {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 20px;
}
.work-detail-footer a {
    color: var(--accent);
    font-size: 1.2rem;
    text-decoration: none;
    transition: color 0.2s;
    display: flex;
    align-items: center;
    font-weight: 600;
}
.work-detail-footer a:hover {
    color: var(--text-dark);
}
.work-detail-footer a i {
    margin-right: 5px;
    font-size: 1.5rem;
}

/* Testimoni */
#testimoni {
  background:linear-gradient(135deg,#12256d,#1f3fa9,#3973ff);
  color:white;
  padding:100px 0 150px;
  text-align:center;
}
#testimoni h2 {
  font-family:"Playfair Display";
  font-size:36px;
  margin-bottom:20px;
  text-shadow:0 4px 20px rgba(0,0,0,0.3);
}
#testimoni p.sub {
  color:rgba(255,255,255,0.8);
  margin-bottom:60px;
  font-size:16px;
}
.slider-3d-testimoni {
  display:flex;
  justify-content:center;
  align-items:center;
  perspective:1000px;
  position:relative;
  height:400px;
  overflow:hidden;
}
.card-testi {
  position:absolute;
  width:320px;
  height:260px;
  background:rgba(255,255,255,0.1);
  border-radius:20px;
  border:1px solid rgba(255,255,255,0.2);
  backdrop-filter:blur(10px);
  box-shadow:0 10px 30px rgba(0,0,0,0.25);
  text-align:center;
  color:white;
  transform-style:preserve-3d;
  transition:transform 0.4s ease, box-shadow 0.4s ease, filter 0.4s ease;
  opacity:0.6;
  padding:20px;
}
.card-testi img {
  width:80px;height:80px;
  border-radius:50%;
  object-fit:cover;
  border:3px solid rgba(255,255,255,0.6);
  margin-bottom:15px;
}
.card-testi h3 {font-size:18px;margin-bottom:8px;}
.card-testi p {
  font-size:14px;
  color:rgba(255,255,255,0.85);
  font-style:italic;
  line-height:1.4;
}
.card-testi:hover {}

/* About (MODIFIED POSITIONING: Reduced top padding to lift text) */
#about {
  background:linear-gradient(135deg, var(--bg-about) 0%, #2a4cb8 40%, #3b6aff 100%);
  color:white;
  /* UBAH PADDING DI SINI: padding atas dikurangi jadi 60px agar naik sekitar 1.5cm */
  padding: 60px 20px 0; 
  overflow: hidden; 
  position: relative; 
  min-height: 100vh; 
  display: flex; 
  flex-direction: column;
  align-items: center;
  /* ADJUSTMENT: Align to top to separate from absolute cards at bottom */
  justify-content: flex-start; 
}
#about h2{
  font-family:"Playfair Display";
  font-size:36px;
  text-align:center;
  margin-bottom:30px;
  text-shadow:0 4px 20px rgba(0,0,0,0.3);
}
#about p{
  text-align:center;
  color:rgba(255,255,255,0.8);
  max-width:700px;
  margin:0 auto 60px;
}
.slider-3d {
  position: absolute; 
  bottom: 100px; /* Cards stay at bottom */
  width: 100%; 
  display:flex;
  justify-content:center;
  align-items:flex-end;
  perspective:1000px;
  flex-wrap: nowrap; 
  overflow: hidden; 
  height: 400px; 
  padding-bottom: 50px; 
  gap: 0px; 
}

/* CARD FLIP LOGIC (HOVER) */
.card {
  position:absolute;
  width:200px;
  height:300px;
  background: transparent;
  border: none;
  box-shadow: none;
  backdrop-filter: none;
  text-align:center;
  color:white;
  transform-style:preserve-3d;
  transition:transform 0.4s ease, left 0.4s ease, top 0.4s ease, z-index 0.4s ease; 
  opacity:1;
  overflow: visible; 
  transform-origin: bottom center;
  cursor: pointer;
  perspective: 1000px;
}

.card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    text-align: center;
    transition: transform 0.6s;
    transform-style: preserve-3d;
}

/* Trigger Flip on Hover */
.card:hover .card-inner {
    transform: rotateY(180deg) translateY(-20px); /* Flip + Lift */
}

/* Common face styles */
.card-front, .card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    border-radius: 20px;
      
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.15);
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.25);
      
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-end;
    padding-bottom: 20px;
}

/* Front styling */
.card-front::before {
    content: '';
    position: absolute;
    bottom: -1px; 
    left: 0;
    width: 100%;
    height: 30px;
    background: linear-gradient(135deg, var(--bg-about), #2a4cb8, #3b6aff);
    border-radius: 0 0 18px 18px; 
    z-index: 20; 
}

.card-front img {
  width:100px;
  height:100px;
  border-radius:50%;
  object-fit:cover;
  margin-top:20px; 
  margin-bottom: auto; 
  border:3px solid rgba(255,255,255,0.6); 
}
.card-front h3 {margin:15px 0 8px;font-size:18px;}
.card-front p {color:rgba(255,255,255,0.75);font-size:14px;}

/* Back styling */
.card-back {
    transform: rotateY(180deg);
    background: linear-gradient(135deg, #1652ff, #0f1e52);
    color: white;
    justify-content: center; 
    padding: 20px;
}
.card-back p {
    font-size: 14px;
    line-height: 1.5;
}

/* Positioning Logic */
.card:nth-child(3) { 
    left: 50%;
    transform: translateX(-50%) translateY(0) scale(1.1);
    z-index: 5;
}

.card:nth-child(2) { 
    left: 35%; 
    transform: translateX(-50%) translateY(20px) scale(1.0); 
    z-index: 4;
}
.card:nth-child(1) { 
    left: 20%; 
    transform: translateX(-50%) translateY(40px) scale(0.9); 
    z-index: 3;
    opacity: 0.8;
}

.card:nth-child(4) { 
    left: 65%; 
    transform: translateX(-50%) translateY(20px) scale(1.0); 
    z-index: 4;
}
.card:nth-child(5) { 
    left: 80%; 
    transform: translateX(-50%) translateY(40px) scale(0.9); 
    z-index: 3;
    opacity: 0.8;
}

/* Karya (FIXED) */
#karya {
  padding: 80px 20px 150px;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow-x: hidden;
}
#karya h2 {
  font-family:"Bricolage Grotesque";
  font-size: 40px;
  color: var(--text-dark);
  margin-bottom: 10px;
}
#karya p {
  color: var(--muted);
  margin-bottom: 30px;
}
.work-filter-tabs {
    display: flex;
    justify-content: center;
    margin-bottom: 30px;
    gap: 10px;
}
.work-filter-tabs .tab-button {
    background: white;
    border: 2px solid var(--accent);
    color: var(--accent);
    padding: 8px 15px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
}
.work-filter-tabs .tab-button i {
    margin-right: 8px;
}
.work-filter-tabs .tab-button.active {
    background: var(--accent);
    color: white;
    box-shadow: 0 4px 10px rgba(22, 82, 255, 0.3);
    transform: translateY(-2px);
}
.gallery-container {
  position: relative;
  width: 100%;
  max-width: 1000px;
  margin: 0 auto;
}
.works-list {
  display: flex;
  overflow-x: auto;
  scroll-behavior: smooth;
  scroll-snap-type: x mandatory;
  padding: 20px 0;
  gap: 20px;
  -ms-overflow-style: none; 
  scrollbar-width: none; 
}
.works-list::-webkit-scrollbar {
  display: none; 
}
.work-card-wrapper {
  flex: 0 0 auto;
  scroll-snap-align: center;
  width: 200px; 
  cursor: pointer;
  position: relative;
  transition: transform 0.3s ease;
}
.work-card {
  width: 100%;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  background-color: white;
  transition: box-shadow 0.3s ease;
}
.work-card-image {
  width: 100%;
  height: 280px; 
  background: var(--accent-2); 
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-dark);
  font-weight: 600;
  font-size: 14px;
  object-fit: cover;
}
.work-card-caption {
  padding: 10px 8px;
  text-align: center;
  font-size: 14px;
  font-weight: 600;
  color: var(--text-dark);
}
.nav-arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(22, 82, 255, 0.7);
  color: white;
  border: none;
  padding: 10px 15px;
  border-radius: 50%;
  cursor: pointer;
  z-index: 20;
  font-size: 20px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  transition: background 0.3s, opacity 0.3s;
}
.nav-arrow:hover {
  background: var(--accent);
}
.nav-arrow.left {
  left: 0;
}
.nav-arrow.right {
  right: 0;
}
.nav-arrow:disabled {
  opacity: 0.5;
  cursor: default;
}
.work-card-wrapper:hover .work-card-info {
  opacity: 1; 
  transform: translateY(0);
}
.work-card-info {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--bg-about); 
  color: white;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 20px;
  border-radius: 12px;
  opacity: 0; 
  transform: translateY(10px);
  transition: opacity 0.3s ease, transform 0.3s ease;
  z-index: 10;
  text-align: center;
}
.work-card-info h4 {
    margin-bottom: 5px;
    font-size: 16px;
    font-weight: 700;
}
.work-card-info p {
    font-size: 12px;
    color: rgba(255, 255, 255, 0.8);
    margin-bottom: 5px; 
    line-height: 1.3;
}
.work-card-info p:last-child {
    margin-bottom: 0;
    font-style: italic;
}
@media (min-width: 768px) {
  .work-card-wrapper {
    width: 220px;
  }
  .work-card-image {
    height: 300px;
  }
  .nav-arrow.left {
    left: -60px; 
  }
  .nav-arrow.right {
    right: -60px; 
  }
  .works-list {
    justify-content: space-between;
    scroll-snap-type: none; 
    gap: 30px;
  }
  .work-card-wrapper {
    flex: 0 0 auto;
  }
}
#karya .step {
    margin-top: 60px;
    position: relative;
    z-index: 10;
}

/* Choice Modal */
.modal-overlay {
    display: none;
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(5px);
    z-index: 1000;
    align-items: center;
    justify-content: center;
    animation: fadeIn 0.3s;
}
.modal-box {
    background: white;
    padding: 40px;
    border-radius: 20px;
    text-align: center;
    box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    max-width: 400px;
    width: 90%;
}
.modal-box h2 {
    font-family: "Bricolage Grotesque";
    color: var(--accent);
    margin-bottom: 20px;
}
.modal-btn {
    display: block;
    width: 100%;
    padding: 12px;
    margin: 10px 0;
    border: none;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.2s;
}
.btn-primary {
    background: var(--accent);
    color: white;
}
.btn-secondary {
    background: #eee;
    color: var(--text-dark);
}
.modal-btn:hover {
    transform: scale(1.03);
}

/* =========================================
   RETRO METAL SPIN WHEEL UI (OVERHAULED)
   ========================================= */

.spin-ui {
    display: none; /* Hidden by default */
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    /* Dark textured background to make metal pop */
    background: radial-gradient(circle, #2a2a2a 0%, #000000 100%), url('https://www.transparenttextures.com/patterns/brushed-alum.png');
    background-blend-mode: multiply;
    z-index: 1100;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.spin-ui h2 {
    color: white;
    font-family: 'Playfair Display', serif; /* Classic serif font */
    font-size: 36px;
    margin-bottom: 30px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.5);
    letter-spacing: 1px;
}

/* Main Metal Frame Container */
.retro-metal-frame {
    width: 100%;
    max-width: 800px;
    height: 400px;
    /* Complex brushed metal gradient */
    background: linear-gradient(to bottom, #dcdcdc 0%, #f0f0f0 15%, #a0a0a0 50%, #e0e0e0 85%, #c0c0c0 100%);
    border-radius: 50px; /* Very rounded corners */
    padding: 20px;
    display: flex;
    gap: 15px;
    position: relative;
    /* Deep 3D bezel effect */
    box-shadow: 
        inset 0 0 10px rgba(255,255,255,0.8),
        inset 0 0 30px rgba(0,0,0,0.5),
        0 15px 30px rgba(0,0,0,0.6),
        0 0 0 5px #555; /* Outer rim rim */
    border: 2px solid #ddd;
}

/* Inner Container for Screens */
.screen-container {
    flex: 1;
    background: #111; /* Dark screen background */
    border-radius: 35px; /* Slightly less rounded than frame */
    /* Curved glass effect using inset shadows and gradients */
    box-shadow: 
        inset 0 10px 20px rgba(255,255,255,0.15), /* Top reflection */
        inset 0 -10px 20px rgba(0,0,0,0.8),    /* Bottom shadow */
        inset 10px 0 20px rgba(0,0,0,0.8),     /* Left shadow */
        inset -10px 0 20px rgba(0,0,0,0.8),    /* Right shadow */
        0 0 0 3px #444; /* Dark bezel rim */
    border: 2px solid #222;
    overflow: hidden;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Left Screen Style */
.screen-left {
    /* Specific styles for left screen content placement */
    padding: 20px;
}
.screen-left img {
    width: 180px;
    height: 180px;
    object-fit: cover;
    border-radius: 12px;
    border: 3px solid rgba(255,255,255,0.8);
    box-shadow: 0 10px 30px rgba(0,0,0,0.7);
}

/* Right Screen Style */
.screen-right {
    /* Specific styles for right screen content placement */
    flex-direction: column;
    text-align: center;
    padding: 30px;
    color: #eee;
}
.screen-right h2 {
    font-family: 'Playfair Display', serif;
    font-size: 28px;
    margin-bottom: 10px;
    color: #fff;
    text-shadow: 0 2px 4px rgba(0,0,0,0.8);
}
.screen-right h3 {
    font-family: 'Playfair Display', serif;
    font-size: 20px;
    margin-bottom: 20px;
    color: #ddd;
    font-weight: 400;
}
.screen-right p {
    font-size: 14px;
    color: #aaa;
    font-family: 'Inter', sans-serif;
}

/* Controls Area (Visual only for now) */
.small-controls {
    position: absolute;
    bottom: 15px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(to bottom, #ccc, #999);
    padding: 5px 15px;
    border-radius: 20px;
    display: flex;
    gap: 15px;
    box-shadow: inset 0 2px 5px rgba(255,255,255,0.6), inset 0 -2px 5px rgba(0,0,0,0.4), 0 2px 5px rgba(0,0,0,0.5);
}
.small-control-btn {
    width: 15px;
    height: 15px;
    background: #666;
    border-radius: 50%;
    box-shadow: inset 0 2px 3px rgba(0,0,0,0.5), 0 1px 1px rgba(255,255,255,0.4);
}
.small-control-btn.red { background: #a00; }

/* The Big Metal Spin Button */
.big-metal-button {
    position: absolute;
    bottom: -20px; /* Position overlapping bottom edge */
    right: 50px;
    width: 90px;
    height: 90px;
    border-radius: 50%;
    /* Complex radial gradient for turned metal knob look */
    background: radial-gradient(circle at center, #f0f0f0 0%, #d0d0d0 30%, #a0a0a0 60%, #707070 100%);
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    /* Deep 3D effect */
    box-shadow: 
        inset 0 0 10px rgba(255,255,255,0.8),
        inset 0 0 20px rgba(0,0,0,0.5),
        0 10px 20px rgba(0,0,0,0.6),
        0 0 0 5px #e0e0e0, /* Outer ring light */
        0 0 0 6px #888;    /* Outer ring dark */
    transition: transform 0.1s;
    z-index: 10;
}
/* Icon inside the button */
.big-metal-button i {
    font-size: 36px;
    color: #333;
    text-shadow: 0 1px 1px rgba(255,255,255,0.5);
}
/* Active press state */
.big-metal-button:active {
    transform: translateY(2px) scale(0.98);
    box-shadow: 
        inset 0 0 15px rgba(0,0,0,0.6),
        0 5px 10px rgba(0,0,0,0.5),
        0 0 0 5px #ccc,
        0 0 0 6px #666;
}
.big-metal-button:disabled {
    opacity: 0.8;
    cursor: not-allowed;
}

/* Close Button Styles */
.close-spin {
    position: absolute;
    top: 30px; right: 30px;
    color: white;
    font-size: 24px;
    cursor: pointer;
    z-index: 1200;
    background: rgba(255,255,255,0.1);
    width: 40px; height: 40px;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    transition: background 0.2s;
}
.close-spin:hover { background: rgba(255,255,255,0.3); }

/* --- LOCATION SECTION FIX --- */
#location-section {
  padding: 80px 20px;
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  margin-bottom: 40px; 
}

#location-section h2 {
  font-family: "Bricolage Grotesque";
  font-size: 40px;
  color: var(--text-dark);
  margin-bottom: 10px;
}

#location-section p {
  color: var(--muted);
  margin-bottom: 30px;
  font-size: 16px;
  max-width: 600px;
}

.map-wrapper {
  width: 100%;
  max-width: 1000px; /* Agar lebar peta sama dengan lebar konten lain */
  height: 450px;     /* Memberikan tinggi tetap agar peta terlihat */
  background: white;
  padding: 10px;     /* Memberi efek bingkai foto */
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1); /* Shadow halus */
  overflow: hidden;
}

.map-wrapper iframe {
  width: 100%;
  height: 100%;
  border: none;
  border-radius: 15px; /* Radius sedikit lebih kecil dari wrapper */
}

/* Responsive adjustment for smaller screens */
@media (max-width: 768px) {
    #about {
    min-height: 500px;
  }
  .slider-3d {
    bottom: -30px;
    height: 350px;
    padding-bottom: 30px;
  }
  .card {
    width: 150px;
    height: 250px;
    border-radius: 15px;
  }
  .card:nth-child(3) {
      transform: translateX(-50%) translateY(0) scale(1.1);
  }
  .card:nth-child(2) {
      left: 30%; 
      transform: translateX(-50%) translateY(15px) scale(0.95);
  }
  .card:nth-child(1) {
      left: 15%; 
      transform: translateX(-50%) translateY(30px) scale(0.85);
      opacity: 0.7;
  }
  .card:nth-child(4) {
      left: 70%; 
      transform: translateX(-50%) translateY(15px) scale(0.95);
  }
  .card:nth-child(5) {
      left: 85%; 
      transform: translateX(-50%) translateY(30px) scale(0.85);
      opacity: 0.7;
  }
    
  .card-front img {
    width: 80px;
    height: 80px;
  }
  .card-front::before {
    height: 20px;
    border-radius: 0 0 15px 15px;
  }
    .retro-metal-frame {
        flex-direction: column;
        height: auto;
        border-radius: 30px;
    }
    .screen-container {
        height: 200px; /* Fixed height for stacked screens */
    }
    .big-metal-button {
        bottom: -10px;
        right: 20px;
        width: 70px;
        height: 70px;
    }
    .big-metal-button i { font-size: 28px; }
}

</style>
</head>
<body>

<div id="musicChoiceModal" class="modal-overlay">
    <div class="modal-box">
        <h2>Galeri Musik</h2>
        <p>Bagaimana kamu ingin menjelajahi karya musik?</p>
        <button class="modal-btn btn-primary" onclick="startSpinUI()">Mau Spin! üé≤</button>
        <button class="modal-btn btn-secondary" onclick="showManualMusic()">Lihat Sendiri üëÄ</button>
    </div>
</div>

<div id="spinWheelOverlay" class="spin-ui">
    <div class="close-spin" onclick="closeSpinUI()"><i class="fas fa-times"></i></div>
    
    <h2>Spin The Music!</h2>
    
    <div class="retro-metal-frame">
        
        <div class="screen-container screen-left" id="spinScreenLeft">
            <img src="https://via.placeholder.com/180/333/fff?text=MUSIC" alt="Placeholder">
        </div>

        <div class="screen-container screen-right" id="spinScreenRight">
             <h2>Ready?</h2>
             <h3>Tekan Tombol Play</h3>
             <p>---</p>
        </div>

        <div class="small-controls">
            <div class="small-control-btn"></div>
            <div class="small-control-btn"></div>
            <div class="small-control-btn red"></div>
            <div class="small-control-btn"></div>
        </div>

        <button id="btnSpinTrigger" class="big-metal-button" onclick="spinTheWheel()">
            <i class="fas fa-play"></i>
        </button>

    </div>
</div>

<div class="nav" onclick="returnToRoadmap()">
  <div class="logo-mark">PZ</div>
  <div><strong>PromedZone</strong></div>
</div>

<div id="home" class="page active">
    
  <div class="landing-section">
      <div class="landing-content">
          <div class="logo-mark" style="width: 60px; height: 60px; margin: 0 auto 20px; font-size: 24px;">PZ</div>
          <h1>PromedZone</h1>
          <p>Media Production & Creative Information Center</p>
          <button class="explore-btn" onclick="scrollToRoadmap()">
              Jelajahi Sekarang <i class="fas fa-arrow-right"></i>
          </button>
      </div>
  </div>

  <div id="roadmap-section" class="roadmap-section">
      <h1>Selamat Datang di <span>PromedZone!</span></h1>
      <p>Temukan informasi seputar kegiatan, profil dosen, karya mahasiswa, dan fasilitas terbaik kami di sini.</p>

      <div class="roadmap" id="heroRoadmap">
          <svg class="roadmap-svg" viewBox="0 0 1000 400" preserveAspectRatio="xMidYMid meet">
              <path class="roadmap-path" 
                    d="M 100 150 
                       C 150 50, 250 50, 300 150 
                       S 450 250, 500 150 
                       C 550 50, 650 50, 700 150
                       S 850 250, 900 150" />
                
              <path class="roadmap-dashed-outline" 
                    d="M 100 150 
                       C 150 50, 250 50, 300 150 
                       S 450 250, 500 150 
                       C 550 50, 650 50, 700 150
                       S 850 250, 900 150" />

              <polygon class="arrowhead" points="900,150 915,140 915,160" />
          </svg>
            
          <div class="road-step-wrapper">
            <div class="road-icon" data-page="promed-nav"><i class="fas fa-info"></i></div>
            <div class="step active" data-page="promed-nav">Tentang Promed & Peminatan</div>
          </div>

          <div class="road-step-wrapper">
            <div class="road-icon" data-page="dosen"><i class="fas fa-lightbulb"></i></div>
            <div class="step" data-page="dosen">Profil Dosen</div>
          </div>

          <div class="road-step-wrapper">
            <div class="road-icon" data-page="calendar"><i class="fas fa-trophy"></i></div>
            <div class="step" data-page="calendar">Event & Kompetisi</div>
          </div>

          <div class="road-step-wrapper">
            <div class="road-icon" data-page="fasilitas"><i class="fas fa-bullseye"></i></div>
            <div class="step" data-page="fasilitas">Fasilitas</div>
          </div>

          <div class="road-step-wrapper">
            <div class="road-icon" data-page="karya"><i class="fas fa-magnet"></i></div>
            <div class="step" data-page="karya">Galeri Karya</div>
          </div>
      </div>
  </div>

  <div id="testimoni">
    <h2>Testimoni Mahasiswa & Alumni</h2>
    <p class="sub">Pendapat mereka tentang pengalaman belajar di Produksi Media.</p>
    <div class="slider-3d-testimoni" id="sliderTesti">
      <div class="card-testi active"><img src="https://via.placeholder.com/150"><h3>Arka Pratama</h3><p>"Promed ngajarin aku gimana bikin konten kreatif yang relevan dengan industri masa kini."</p></div>
      <div class="card-testi"><img src="https://via.placeholder.com/150"><h3>Salsabila N.</h3><p>"Dosen-dosennya inspiratif banget! Kita diajarin langsung sama praktisi dunia media."</p></div>
      <div class="card-testi"><img src="https://via.placeholder.com/150"><h3>Rian Saputra</h3><p>"Lingkungan belajarnya seru, banyak kolaborasi dan project nyata."</p></div>
      <div class="card-testi"><img src="https://via.placeholder.com/150"><h3>Ayu Wulandari</h3><p>"Setiap semester selalu ada karya yang bisa dibanggakan buat portofolio."</p></div>
      <div class="card-testi"><img src="https://via.placeholder.com/150"><h3>Kevin H.</h3><p>"Kuliah di Promed bener-bener bantu aku siap kerja di industri kreatif."</p></div>
    </div>
  </div>

  <div id="about">
    <h2>About Us</h2>
    <p>Tim di balik PromedZone terdiri dari individu kreatif yang berfokus pada pengembangan media dan teknologi digital.</p>
    <div class="slider-3d" id="aboutCards">
        <div class="card">
            <div class="card-inner">
                <div class="card-front">
                    <img src="https://via.placeholder.com/180">
                    <h3>Sovia</h3>
                    <p>Developer</p>
                </div>
                <div class="card-back">
                    <p>"Full Stack Developer yang antusias dengan teknologi web modern dan keamanan siber."</p>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-inner">
                <div class="card-front">
                    <img src="https://via.placeholder.com/180">
                    <h3>Nabila</h3>
                    <p>Developer</p>
                </div>
                <div class="card-back">
                    <p>"Creative Developer yang fokus pada interaksi pengguna yang intuitif dan desain responsif."</p>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-inner">
                <div class="card-front">
                    <img src="https://via.placeholder.com/180">
                    <h3>Janyce</h3>
                    <p>Project Manager</p>
                </div>
                <div class="card-back">
                    <p>"Project Manager yang memastikan setiap milestone tercapai tepat waktu dan kolaborasi tim berjalan lancar."</p>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-inner">
                <div class="card-front">
                    <img src="https://via.placeholder.com/180">
                    <h3>Kirana</h3>
                    <p>Developer</p>
                </div>
                <div class="card-back">
                    <p>"Backend Specialist yang menjaga keamanan database dan efisiensi performa server."</p>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-inner">
                <div class="card-front">
                    <img src="https://via.placeholder.com/180">
                    <h3>Mayske</h3>
                    <p>Developer</p>
                </div>
                <div class="card-back">
                    <p>"UI Engineer yang gemar mengeksplorasi desain visual yang estetik dan pengalaman pengguna yang mulus."</p>
                </div>
            </div>
        </div>
    </div>
  </div>

  <div id="location-section">
      <h2>Lokasi Kampus</h2>
      <p>Kunjungi kami di Program Pendidikan Vokasi Universitas Indonesia.</p>
      <div class="map-wrapper">
        <iframe 
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3965.263764638683!2d106.829461314769!3d-6.359907995398048!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69ec189231230b%3A0x53096b65112c3e11!2sProgram%20Pendidikan%20Vokasi%20Universitas%20Indonesia!5e0!3m2!1sen!2sid!4v1636344567890!5m2!1sen!2sid" 
            allowfullscreen="" 
            loading="lazy">
        </iframe>
      </div>
  </div>

</div>

<div id="promed-nav" class="page">
    <h2>Informasi Program Studi</h2>
    <p>Pilih kategori informasi yang ingin Anda lihat.</p>
    <div class="nav-icon-container">
        <div class="nav-item" data-page="promed-about-detail">
            <i class="fas fa-school"></i>
            <p>Apa itu Promed?</p>
        </div>
        <div class="nav-item" data-page="promed-peminatan-detail">
            <i class="fas fa-users"></i>
            <p>Peminatan</p>
        </div>
    </div>
    <button class="step" data-page="home" style="margin-top: 40px;">Kembali ke Home</button>
</div>

<div id="promed-about-detail" class="page">
    <button class="step" data-page="promed-nav" style="margin-top: 0; align-self: center;">Kembali ke Pilihan</button>
    <div class="detail-card">
        <h2 id="promedAboutTitle">Apa itu Produksi Media?</h2>
        <div class="detail-description">
            <p>Produksi Media merupakan program sarjana terapan (D4) Produksi Media bertujuan mencetak profesional industri kreatif yang beretika dan mampu memanfaatkan TIK secara inovatif. Pembelajaran berlandaskan lima pilar **Arts, Business, Communication, Science, dan Technology untuk membangun wawasan global, kreativitas, dan kemampuan berinovasi melalui berbagai platform media dan teknologi baru.</p>
            <p>Sebagai program vokasi, fokusnya adalah membekali mahasiswa dengan pengetahuan dan keterampilan praktis untuk menghasilkan karya kreatif di bidang produksi media, seperti konten digital, game, animasi, e-sports, iklan, desain visual, audio, komik, film, musik, fotografi, streaming, dan media massa lainnya.</p>
        </div>
    </div>
</div>

<div id="promed-peminatan-detail" class="page">
    <button class="step" data-page="promed-nav" style="margin-top: 0; align-self: center;">Kembali ke Pilihan</button>
    <div class="detail-card" style="max-width: 1000px;">
        <h2 id="peminatanTitle">Peminatan/Studio di Produksi Media</h2>
        <div class="peminatan-list" id="peminatanList">
            </div>
    </div>
</div>
<div id="peminatan-single-detail-temp" class="page">
    </div>

<div id="dosen" class="page">
    <div class="dosen-arch-wrapper">
        <h2>Meet cur Team</h2>
        <p>A diverse group of passionate professionals, each bringing unique skills.</p>
        <div class="arch-scene" id="dosen-arch-scene">
            </div>
        <div class="scroll-indicator" onclick="document.getElementById('dosenGrid').scrollIntoView({behavior:'smooth'})"><i class="fas fa-chevron-down"></i></div>
    </div>

    <div class="dosen-grid-wrapper">
        <h2>Profil Dosen</h2>
        <p>Dosen Produksi Media UI berpengalaman di industri kreatif dan digital.</p>
        <div class="dosen-grid" id="dosenGrid">
            </div>
        <button class="step" data-page="home" style="margin-top: 40px;">Kembali ke Home</button>
    </div>
</div>

<div id="fasilitas" class="page">
    <div class="facility-card">
        <h2>Fasilitas Produksi Media</h2>
          
        <div class="facility-image-placeholder">
            [Area untuk Foto 360¬∞]
        </div>
          
        <p>
            **POLAR LAB** (Laboratorium Produksi Media dan Teaching Factory) adalah laboratorium milik Program Studi Produksi Media yang berfungsi sebagai pusat penelitian dan produksi media, sekaligus sebagai *teaching factory* untuk mendukung pengembangan bakat, minat, dan pembelajaran mahasiswa di berbagai bidang, seperti *game development*, animasi, jurnalisme digital, dan produksi media lainnya.
        </p>
    </div>
    <button class="step" data-page="home">Kembali</button>
</div>

<div id="calendar" class="page">
    <h2>üóìÔ∏è Event & Kompetisi Promed 2025</h2>
    <p>Pameran, workshop, dan event tahunan Produksi Media.</p>

    <div class="calendar-wrapper">
        <div class="calendar-header">
            <button id="prevMonth"><i class="fas fa-chevron-left"></i></button>
            <div class="calendar-title" id="monthYearTitle"></div>
            <button id="nextMonth"><i class="fas fa-chevron-right"></i></button>
        </div>
          
        <div class="calendar-grid">
            <div class="calendar-day-name">Sen</div>
            <div class="calendar-day-name">Sel</div>
            <div class="calendar-day-name">Rab</div>
            <div class="calendar-day-name">Kam</div>
            <div class="calendar-day-name">Jum</div>
            <div class="calendar-day-name">Sab</div>
            <div class="calendar-day-name">Min</div>
        </div>
          
        <div class="calendar-grid" id="calendarDates">
            </div>

    </div>

    <div class="event-list-container">
        <h3>Kegiatan Mendatang</h3>
        <div id="eventList">
            </div>
    </div>
    <button class="step" data-page="home" style="margin-top: 40px;">Kembali ke Home</button>
</div>

<div id="event-detail" class="page">
    <button class="step" data-page="calendar" style="margin-top: 0; align-self: flex-start;">Kembali ke Kalender</button>
    <div class="detail-card">
        <h2 id="detailTitle">Judul Acara</h2>
          
        <div class="detail-info">
            <p><strong>Tanggal</strong>: <span id="detailDate"></span></p>
            <p><strong>Tempat</strong>: <span id="detailPlace"></span></p>
            <p><strong>Penyelenggara</strong>: <span id="detailOrganizer"></span></p>
        </div>
          
        <div class="detail-description">
            <p id="detailDescription"></p>
            <p>Info lebih lanjut: <a href="#" id="detailIgLink" target="_blank"><i class="fab fa-instagram"></i> <span id="detailIgName"></span></a></p>
        </div>
    </div>
</div>

<div id="karya" class="page">
    <h2>Galeri Karya</h2>
    <p>Film pendek, animasi, dan game edukatif karya mahasiswa.</p>
      
    <div class="work-filter-tabs">
        <div class="tab-button active" data-filter="all" id="allTab"><i class="fas fa-layer-group"></i> Semua</div>
        <div class="tab-button" data-filter="game" id="gameTab"><i class="fas fa-gamepad"></i> Game</div>
        <div class="tab-button" data-filter="film" id="filmTab"><i class="fas fa-video"></i> Film</div>
        <div class="tab-button" data-filter="music" id="musicTab"><i class="fas fa-music"></i> Musik</div>
    </div>
    <div class="gallery-container">
        <button class="nav-arrow left" id="scrollLeft"><i class="fas fa-chevron-left"></i></button>

        <div class="works-list" id="worksList">
            </div>

        <button class="nav-arrow right" id="scrollRight"><i class="fas fa-chevron-right"></i></button>
    </div>
      
    <button class="step" data-page="home">Kembali ke Home</button>
</div>

<div id="work-detail" class="page">
    <div class="detail-card">
        <h2 id="workDetailTitle">Judul Karya</h2>
          
        <div id="workMediaContainer" class="media-container">
            </div>
          
        <div class="detail-info">
            <p><strong>Kategori</strong>: <span id="workDetailCategory"></span></p>
            <p><strong>Status</strong>: <span id="workDetailStatus"></span></p>
        </div>
          
        <div class="detail-description">
            <p id="workDetailDescription"></p>
        </div>

        <div class="work-detail-footer" id="workDetailFooter">
            </div>
    </div>
    <button class="step" data-page="karya" style="margin-top: 40px;">Kembali ke Galeri</button>
</div>

<script>
// NAVIGASI HALAMAN & SLIDER
const pages = document.querySelectorAll(".page");
// MODIFIED: Select both .step buttons and .road-icon divs
const roadmapButtons = document.querySelectorAll(".step, .road-icon");

// FUNGSI BARU: Scroll ke Roadmap
function scrollToRoadmap() {
    document.getElementById('roadmap-section').scrollIntoView({behavior: 'smooth'});
}

// FUNGSI BARU: Kembali ke Roadmap via Navbar
function returnToRoadmap() {
    navigateToPage('home');
    setTimeout(() => {
        document.getElementById('roadmap-section').scrollIntoView({behavior: 'smooth'});
    }, 100);
}

function navigateToPage(targetPage, itemId = null) {
    pages.forEach(p => p.classList.remove("active"));
      
    // Stop media playback saat pindah halaman
    stopMediaPlayback();

    const targetElement = document.getElementById(targetPage);
    if (targetElement) {
        targetElement.classList.add("active");
        window.scrollTo({top: 0, behavior: "smooth"});
    }

    if (targetPage === 'event-detail' && itemId) {
        showEventDetail(itemId);
    } else if (targetPage === 'work-detail' && itemId) {
        showWorkDetail(itemId);
    }
      
    if (targetPage === 'promed-peminatan-detail') {
        renderPeminatanListDetail();
    }
    if (targetPage === 'dosen') {
        renderDosenGrid();
    }

    // Update active state di roadmap
    const roadmapContainer = document.getElementById('heroRoadmap');
    if (roadmapContainer) {
        document.querySelectorAll('#heroRoadmap .step').forEach(b => b.classList.remove("active"));
          
        const promedNavPages = ['promed-nav', 'promed-about-detail', 'promed-peminatan-detail', 'peminatan-single-detail-temp'];
        const promedNavButton = document.querySelector('.road-step-wrapper .step[data-page="promed-nav"]');

        if (promedNavPages.includes(targetPage) && promedNavButton) {
            promedNavButton.classList.add("active");
        } else {
            const targetBtn = document.querySelector(`#heroRoadmap .step[data-page="${targetPage}"]`);
            if (targetBtn) {
                targetBtn.classList.add("active");
            } else if (targetPage === 'home' && promedNavButton) {
                 promedNavButton.classList.add("active");
            }
        }
    }
}

function stopMediaPlayback() {
    const mediaContainer = document.getElementById('workMediaContainer');
    if (mediaContainer) {
        mediaContainer.innerHTML = '';
    }
}

roadmapButtons.forEach(btn => {
  btn.addEventListener("click", () => {
    const target = btn.getAttribute("data-page");
    if(target) navigateToPage(target); // Added check
  });
});

document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('#promed-nav .nav-item').forEach(item => {
        item.addEventListener('click', function() {
            navigateToPage(this.dataset.page);
        });
    });
      
    // INITIALIZE HOME ACTIVE STATE
    const promedNavButton = document.querySelector('.road-step-wrapper .step[data-page="promed-nav"]');
    if (promedNavButton) {
        promedNavButton.classList.add("active");
    }

});


const testiCards=document.querySelectorAll('.slider-3d-testimoni .card-testi');
let currentTesti=0;
function updateTesti(){
  testiCards.forEach((card,i)=>{
    const offset=i-currentTesti;
    card.style.transform=`translateX(${offset*340}px) rotateY(${offset*-25}deg) translateZ(${Math.abs(offset)*-100}px)`;
    card.style.zIndex=5-Math.abs(offset);
    card.classList.toggle('active',i===currentTesti);
  });
}
updateTesti();
let hoverTesti=false;
const testiSlider=document.getElementById('sliderTesti');
setInterval(()=>{if(!hoverTesti){currentTesti=(currentTesti+1)%testiCards.length;updateTesti();}},2500);


// DATA PEMINATAN
const peminatanData = [
    { id: 'orangfilm', name: 'Orang Film UI', description: 'Orang Film UI adalah sebuah studio yang juga menjadi mini production house di Produksi Media yang berfokus pada bidang Filmografi, Fotografi & Videografi.', ig: 'orangfilm.ui', igLink: 'https://www.instagram.com/orangfilm.ui?igsh=bGk1NTI0bzBjMzQw', icon: 'fas fa-video', },
    { id: 'wirestudio', name: 'Wire Studio', description: 'WIRE adalah studio Musik dan Audio di Produksi Media Ul yang berfokus pada produksi (music production) serta bisnis musik dan audio (mini-release label).', ig: 'wirestudio.music', igLink: 'https://www.instagram.com/wirestudio.music?igsh=MW1zYmZkM292aGc1dA==', icon: 'fas fa-microphone-alt', },
    { id: 'oxlab', name: 'OX-LABORATORY', description: 'OX-Laboratory adalah studio pengembangan gim dengan fokus memfasilitasi minat mahasiswa dalam produksi gim digital.', ig: 'ox.lab', igLink: 'https://www.instagram.com/ox.lab?igsh=d2k2N3RhOGFvN2M5', icon: 'fas fa-gamepad', },
    { id: 'tobostudio', name: 'TOBO Studio', description: 'Toys and Bricks Development Studio merupakan studio yang mewadahi mahasiswa Produksi Media UI yang memiliki minat dalam fokus mengembangkan mainan.', ig: 'studio.tobo', igLink: 'https://www.instagram.com/studio.tobo?igsh=enU0aXJmZG9ldnlh', icon: 'fas fa-cube', },
    { id: 'pokostudio', name: 'POKO Studio', description: 'PojoKomik (POKO) Studio merupakan studio konsentrasi di jurusan Produksi Media UI yang mengambil langkah inovatif di bidang komik.', ig: 'pojokomik.studio', igLink: 'https://www.instagram.com/pojokomik.studio?igsh=MTh0YWc1bHhqdGJ0dA==', icon: 'fas fa-paint-brush', },
    { id: 'pixelpals', name: 'Pixel Pals', description: 'Pixel Pals adalah nama studio/peminatan dari konsentrasi Animasi dan Desain Visual.', ig: 'pixelpals.ui', igLink: 'https://www.instagram.com/pixelpals.ui?igsh=MWUzZmpxZ3B2eTNmZQ==', icon: 'fas fa-palette', },
    { id: 'spice', name: 'S.P.I.C.E. Studio', description: 'S.P.I.C.E. Studio merupakan wadah bagi mahasiswa konsentrasi HCI dan CT di Produksi Media Ul.', ig: 's.p.i.c.e.studio', igLink: 'https://www.instagram.com/s.p.i.c.e.studio?igsh=MTQwYjR2c3BocGl5MA==', icon: 'fas fa-desktop', },
    { id: 'kulscreative', name: 'KULS Creative', description: 'KULS Creative merupakan studio yang menjadi wadah kreatif bagi para mahasiswa Produksi Media Universitas Indonesia konsentrasi Periklanan.', ig: 'kuls.creative', igLink: 'https://www.instagram.com/kuls.creative?igsh=MW1xMmptNXp3eTZoYQ==', icon: 'fas fa-lightbulb', },
    { id: 'mosaic', name: 'MOSAIC', description: 'MOSAIC adalah studio kolektif profesional dengan fokus khusus pada intelegensi media dan streaming Over-the-Top (OTT).', ig: 'mosaic.ui', igLink: 'https://www.instagram.com/mosaic.ui?igsh=MW52ZGNhcHhoZnpydQ==', icon: 'fas fa-stream', },
    { id: 'promedicon', name: 'PROMED ICON', description: 'ICON merupakan studio bagi mahasiswa konsentrasi Konversi Media & IP.', ig: 'ui.icon', igLink: 'https://www.instagram.com/ui.icon?igsh=MWx2ejM5OWN1cTA2aw==', icon: 'fas fa-sync-alt', },
    { id: 'mvpesports', name: 'MVP E-Sports', description: 'MVP E-Sports merupakan studio di Produksi Media Ul yang fokus mempelajari industri Esports di belakang layar.', ig: 'mvpesport.ui', igLink: 'https://www.instagram.com/mvpesports.ui?igsh=MWt2bHh6cmsycXVxbQ==', icon: 'fas fa-trophy', },
    { id: 'votemedia', name: 'VOTE. Media', description: 'VOTE Media menjadi studio yang menaungi mahasiswa yang memiliki peminatan di bidang Jurnalisme Digital.', ig: 'votemedia.id', igLink: 'https://www.instagram.com/votemedia.id?igsh=Mmlpb2NncWpvZmli', icon: 'fas fa-newspaper', },
    { id: 'fluimedia', name: 'FLUI Media', description: 'FLUI Media adalah studio Media Fashion & Lifestyle yang berada di bawah Produksi Media.', ig: 'fluimedia', igLink: 'https://www.instagram.com/fluimedia?igsh=enN4amZ6aXBuYTJ0', icon: 'fas fa-tshirt', },
];

function renderPeminatanListDetail() {
    const container = document.getElementById('peminatanList');
    if (!container) return;
    container.innerHTML = '';
      
    peminatanData.forEach((peminatan) => {
        const itemBox = document.createElement('div');
        itemBox.classList.add('peminatan-item-box');
        itemBox.onclick = () => showPeminatanDetail(peminatan.id);

        itemBox.innerHTML = `
            <div class="image-placeholder">
                <i class="${peminatan.icon}" style="font-size: 30px;"></i>
            </div>
            <div class="content">
                <h4>${peminatan.name}</h4>
            </div>
        `;
        container.appendChild(itemBox);
    });
}

function showPeminatanDetail(peminatanId) {
    const peminatan = peminatanData.find(p => p.id === peminatanId);
    if (!peminatan) return;

    let tempDetailPage = document.getElementById('peminatan-single-detail-temp');
    if (!tempDetailPage) {
        tempDetailPage = document.createElement('div');
        tempDetailPage.id = 'peminatan-single-detail-temp';
        tempDetailPage.classList.add('page');
        document.body.appendChild(tempDetailPage);
    }

    const igLinkElement = peminatan.igLink 
        ? `<div class="work-detail-footer">
               <a href="${peminatan.igLink}" target="_blank"><i class="fab fa-instagram"></i> Instagram ${peminatan.ig}</a>
           </div>` 
        : '';
        
    const detailContent = `
        <button class="step" data-page="promed-peminatan-detail" style="margin-top: 0; align-self: center;">Kembali ke Studio</button>
        <div class="detail-card">
            <h2 id="peminatanDetailTitle">${peminatan.name}</h2>
            <div class="detail-info">
                <p><strong>Fokus</strong>: Peminatan ${peminatan.name}</p>
            </div>
            <div class="detail-description">
                <p>${peminatan.description}</p>
            </div>
            ${igLinkElement}
        </div>
    `;
    
    tempDetailPage.innerHTML = detailContent;
    navigateToPage(tempDetailPage.id);

    const backButton = tempDetailPage.querySelector('.step[data-page="promed-peminatan-detail"]');
    if(backButton) {
        backButton.addEventListener('click', () => {
             navigateToPage('promed-peminatan-detail');
        });
    }
}
document.addEventListener('DOMContentLoaded', () => {
    if (document.getElementById('peminatanList')) {
        renderPeminatanListDetail();
    }
});


// DATA DOSEN
const dosenData = [
    { name: "Ngurah Rangga Wisesa, .", image:"", position: "Kepala Program Studi Produksi Media", ig: "ranggawisesa", igLink: "https://www.instagram.com/ranggawisesa", linkedin: "dr-rangga-w-2906189b", linkedinLink: "https://www.linkedin.com/in/dr-rangga-w-2906189b" },
    { name: "Dr. Achmad Istamar", image:"fotodosen.jpg/4b473379-e188-43b6-ac31-512d713e2bf5.JPG", position: "Country Head-Indonesia at Google Customer Solutions", ig: "achmadistamar", igLink: "https://www.instagram.com/achmadistamar", linkedin: "istamar", linkedinLink: "https://www.linkedin.com/in/istamar" },
    { name: "Sheila Timothy", image:"fotodosen.jpg/296a6b3f-c656-4e7c-9d52-37f5e3bfc30e.JPG", position: "Produser Film", ig: "lalatimothy", igLink: "https://www.instagram.com/lalatimothy", linkedin: "sheila-timothy", linkedinLink: "https://www.linkedin.com/in/sheila-timothy" },
    { name: "Dian Paramita Sastrowardoyo, M.M.", position: "Aktris, Produser, Sutradara Film", ig: "therealdisastr", igLink: "https://www.instagram.com/therealdisastr", linkedin: null, linkedinLink: "https://www.linkedin.com/in/dian-paramita-sastrowardoyo", image: "fotodosen.jpg/24451816-7f74-4c26-a57a-af6d73d787ee.JPG" }, 
    { name: "Alif Keenan Ibrahim, M.A.", image:"fotodosen.jpg/73e3bdbf-caf5-4838-9198-a578a911a16b.JPG", position: "Content Strategy & Analytics at Vidio", ig: "alif.keenan", igLink: "https://www.instagram.com/alif.keenan", linkedin: "alif-ibrahim", linkedinLink: "https://www.linkedin.com/in/alif-ibrahim" },
    { name: "Hendrika Gaudens Refwalu, M.M.", image:"fotodosen.jpg/f02d39b6-9e99-4b61-bc30-605e747cc344.JPG", position: "Marketing Lead Microsoft Indonesia", ig: "densi_refwalu", igLink: "https://www.instagram.com/densi_refwalu", linkedin: "densirefwalu", linkedinLink: "https://www.linkedin.com/in/densirefwalu" },
    { name: "Wafa Taftazani, MBA", image:"fotodosen.jpg/d56f3a6b-cd86-4ca7-b931-00ab80537c88.JPG", position: "UpBanx, VCGamers, RANSVERSE", ig: "wafataftazani", igLink: "https://www.instagram.com/wafataftazani", linkedin: "wafataftazani", linkedinLink: "https://www.linkedin.com/in/wafataftazani" },
    { name: "Svida S.P. Alisjahbana, MBA", image:"fotodosen.jpg/dd4d6e7f-49bd-48d6-a548-fbdd96238ef4.JPG",position: "GCM MEDIA GROUP", ig: "svidss", igLink: "https://www.instagram.com/svidss", linkedin: "svidaalisjahbana", linkedinLink: "https://www.linkedin.com/in/svidaalisjahbana" },
    { name: "Gabriel Chemin, MBA", image:"fotodosen.jpg/79e2c644-a9c6-4421-87f7-c753461c2ee1.JPG", position: "General Project Manager Spotify", ig: "gabechemin", igLink: "https://www.instagram.com/gabechemin", linkedin: "gabrielchemin", linkedinLink: "https://www.linkedin.com/in/gabrielchemin" },
    { name: "Dr. Eunice Sari", image:"fotodosen.jpg/a0612582-2d4d-4d4b-aae9-1d4a14a161b4.JPG", position: "CX INSIGHT", ig: "eunicesari", igLink: "https://www.instagram.com/eunicesari", linkedin: "dr-eunice-sari", linkedinLink: "https://www.linkedin.com/in/dr-eunice-sari" },
    { name: "Arief Suditomo, MA", image:"fotodosen.jpg/95948c2a-5378-4f96-a641-0cbd1e52e100.JPG", position: "News Director & Editor in Chief Metro TV", ig: "ariefsuditomo", igLink: "https://www.instagram.com/ariefsuditomo", linkedin: "ariefsuditomo", linkedinLink: "https://www.linkedin.com/in/ariefsuditomo" },
    { name: "Nadif Zahirudin", image:"fotodosen.jpg/5a32a7a2-4c8d-4c77-9ad5-07fdc29984a5.JPG", position: "Kuy! Entertainment", ig: null, igLink: null, linkedin: "nzahiruddin", linkedinLink: "https://www.linkedin.com/in/nzahiruddin" },
    { name: "Dr. Soraya Haque", image:"fotodosen.jpg/11287e20-cd9e-4150-804c-fcfc95d56ae6.JPG", position: "Model", ig: "sorayahaque", igLink: "https://www.instagram.com/sorayahaque", linkedin: null, linkedinLink: null },
    { name: "Lukman Sardi", image:"fotodosen.jpg/5f65ad6d-5932-4ba1-8502-59d1ea59ae0c.JPG", position: "Sutradara & Produser", ig: "lukmansrd", igLink: "https://www.instagram.com/lukmansrd", linkedin: "lukman-sardi", linkedinLink: "https://www.linkedin.com/in/lukman-sardi" }
];

const dosenGridContainer = document.getElementById('dosenGrid');
const dosenArchContainer = document.getElementById('dosen-arch-scene');

function renderDosenGrid() {
    if (!dosenGridContainer) return;
    dosenGridContainer.innerHTML = '';
    dosenGridContainer.classList.add('dosen-grid');

    dosenData.forEach((dosen, index) => {
        const card = document.createElement('div');
        card.classList.add('dosen-card');
        card.id = 'dosen-card-' + index; // ID for scrolling target
        
        let socialLinks = '';
        if (dosen.igLink) {
            socialLinks += `<a href="${dosen.igLink}" target="_blank"><i class="fab fa-instagram"></i></a>`;
        }
        if (dosen.linkedinLink) {
            socialLinks += `<a href="${dosen.linkedinLink}" target="_blank"><i class="fab fa-linkedin"></i></a>`;
        }

        let imageHTML = '';
        if (dosen.image) {
            imageHTML = `<img src="${dosen.image}" alt="${dosen.name}" class="dosen-image-real">`;
        } else {
            imageHTML = `<div class="dosen-image-placeholder">[Foto Dosen ${index + 1}]</div>`;
        }

        card.innerHTML = `
            ${imageHTML}
            <h4>${dosen.name}</h4>
            <p class="dosen-expertise">${dosen.position}</p>
            <div class="dosen-social-links">${socialLinks}</div>
        `;
        dosenGridContainer.appendChild(card);
    });
    
    renderDosenArch();
}

// --- ANIMATED ARCH LOGIC ---
let archAnimationId;
let archIsPaused = false;
let currentArchOffset = 0; 

function renderDosenArch() {
    if (!dosenArchContainer) return;
    dosenArchContainer.innerHTML = '';
    
    if(archAnimationId) cancelAnimationFrame(archAnimationId);
    
    const total = dosenData.length;
    const radius = 600; 
    const centerX = dosenArchContainer.clientWidth / 2;
    const centerY = 600; 
    
    dosenData.forEach((dosen, index) => {
        const item = document.createElement('div');
        item.classList.add('arch-item');
        
        let imgSrc = "https://via.placeholder.com/120x160"; 
        if (dosen.image) {
            imgSrc = dosen.image;
        }
        
        item.innerHTML = `<img src="${imgSrc}" alt="${dosen.name}" draggable="false">`; 
        item.title = dosen.name;
        
        item.onclick = () => {
            const target = document.getElementById('dosen-card-' + index);
            if(target) {
                target.scrollIntoView({behavior: 'smooth', block: 'center'});
                target.style.transition = "transform 0.3s, box-shadow 0.3s";
                target.style.transform = "scale(1.05)";
                target.style.boxShadow = "0 0 20px var(--accent)";
                setTimeout(() => {
                    target.style.transform = "scale(1)";
                    target.style.boxShadow = "";
                }, 1000);
            }
        };
        
        item.addEventListener('mouseenter', () => { archIsPaused = true; });
        item.addEventListener('mouseleave', () => { archIsPaused = false; });
        
        dosenArchContainer.appendChild(item);
    });
    
    animateArch();
}

function animateArch() {
    const items = document.querySelectorAll('.arch-item');
    const total = items.length;
    const radius = 450; 
    const spread = 20; 
    
    if (!archIsPaused) {
        currentArchOffset -= 0.05; 
    }
    
    items.forEach((item, index) => {
        let angleDeg = (index * spread) + currentArchOffset;
        let theta = (angleDeg - 90) * (Math.PI / 180); 
        
        let x = Math.cos(theta) * radius;
        let y = Math.sin(theta) * radius;
        
        let rotateCard = x * 0.05; 
        
        const cX = dosenArchContainer.clientWidth / 2;
        const cY = 500; 
        
        item.style.left = (cX + x - 60) + 'px'; 
        item.style.top = (cY + y - 80) + 'px';  
        
        let normAngle = (angleDeg % 360);
        if (normAngle < 0) normAngle += 360;
        
        if (y > 0) {
             item.style.opacity = 0;
             item.style.pointerEvents = 'none';
        } else {
             item.style.opacity = 1;
             item.style.pointerEvents = 'auto';
        }
        
        item.style.transform = `rotate(${rotateCard}deg)`;
    });
    
    archAnimationId = requestAnimationFrame(animateArch);
}


// DATA KARYA
// Updated with specific music data from user
const worksData = [
    // -- 12 LAGU BARU --
    { id: 'arteeich_ever', title: 'Ever', category: 'Arteeich - Musik', type: 'music', status: 'Aktif', description: 'Lagu Ever oleh Arteeich.', mediaType: 'music', youtubeId: '4Q9zHVsCQ-8', youtubeLink: 'https://youtu.be/4Q9zHVsCQ-8' },
    
    { id: 'juzzer_buku', title: 'Buku Pesta Cinta', category: 'Juzzer - Musik', type: 'music', status: 'Aktif', description: 'Lagu Buku Pesta Cinta oleh Juzzer.', mediaType: 'music', youtubeId: '9HhlxZ9X3hE', youtubeLink: 'https://youtu.be/9HhlxZ9X3hE' },
    { id: 'juzzer_perempuan', title: 'Apakah Aku Harus Berubah Menjadi Perempuan', category: 'Juzzer - Musik', type: 'music', status: 'Aktif', description: 'Lagu Apakah Aku Harus Berubah Menjadi Perempuan oleh Juzzer.', mediaType: 'music', youtubeId: 'rJKbeRe2nvw', youtubeLink: 'https://youtu.be/rJKbeRe2nvw' },
    { id: 'juzzer_asam', title: 'Asam Manis', category: 'Juzzer - Musik', type: 'music', status: 'Aktif', description: 'Lagu Asam Manis oleh Juzzer.', mediaType: 'music', youtubeId: 'rJKbeRe2nvw', youtubeLink: 'https://youtu.be/rJKbeRe2nvw' },
    { id: 'juzzer_akukau', title: 'Aku Kau dan Musik', category: 'Juzzer - Musik', type: 'music', status: 'Aktif', description: 'Lagu Aku Kau dan Musik oleh Juzzer.', mediaType: 'music', youtubeId: 'poZUlQ7I7h4', youtubeLink: 'https://youtu.be/poZUlQ7I7h4' },
    { id: 'juzzer_heykau', title: 'Hey Kau Gadis Nan Jauh Disana', category: 'Juzzer - Musik', type: 'music', status: 'Aktif', description: 'Lagu Hey Kau Gadis Nan Jauh Disana oleh Juzzer.', mediaType: 'music', youtubeId: 'zWXvpkdwedY', youtubeLink: 'https://youtu.be/zWXvpkdwedY' },
    
    { id: 'sh_alleen', title: 'Alleen', category: 'Secret Hideaway - Musik', type: 'music', status: 'Aktif', description: 'Lagu Alleen oleh Secret Hideaway.', mediaType: 'music', youtubeId: 'mMdXWIQ4ppU', youtubeLink: 'https://youtu.be/mMdXWIQ4ppU' },
    { id: 'sh_firstlook', title: 'First Look', category: 'Secret Hideaway - Musik', type: 'music', status: 'Aktif', description: 'Lagu First Look oleh Secret Hideaway.', mediaType: 'music', youtubeId: '8MFqPf4c9jg', youtubeLink: 'https://youtu.be/8MFqPf4c9jg' },
    { id: 'sh_tryagain', title: 'Try Again', category: 'Secret Hideaway - Musik', type: 'music', status: 'Aktif', description: 'Lagu Try Again oleh Secret Hideaway.', mediaType: 'music', youtubeId: 'aeI7lVT-mMA', youtubeLink: 'https://youtu.be/aeI7lVT-mMA' },
    { id: 'sh_hideaway', title: 'Hideaway', category: 'Secret Hideaway - Musik', type: 'music', status: 'Aktif', description: 'Lagu Hideaway oleh Secret Hideaway.', mediaType: 'music', youtubeId: '8GbPy8YtRiE', youtubeLink: 'https://youtu.be/8GbPy8YtRiE' },
    
    { id: 'sd_givein', title: 'Give In To The Groove', category: 'Sarjana Disko - Musik', type: 'music', status: 'Aktif', description: 'Lagu Give In To The Groove oleh Sarjana Disko.', mediaType: 'music', youtubeId: '7rkB7-zWjxA', youtubeLink: 'https://youtu.be/7rkB7-zWjxA' },
    
    { id: 'cp_wherever', title: 'Wherever The Wind Take Us', category: 'Charmless Pals - Musik', type: 'music', status: 'Aktif', description: 'Lagu Wherever The Wind Take Us oleh Charmless Pals.', mediaType: 'music', youtubeId: 'PbQ9KoLncWc', youtubeLink: 'https://youtu.be/PbQ9KoLncWc' },

    // -- KARYA LAINNYA (GAME/FILM) TETAP ADA --
    { id: 'fate', title: 'Fate', category: 'Film Cerita Pendek', type: 'film', status: 'Pemenang VUIFILMFEST 2024', description: 'Film cerita pendek karya mahasiswa Produksi Media UI.', mediaType: 'film' },
    { id: 'baduy', title: 'Baduy', category: 'Film Dokumenter', type: 'film', status: 'Pemenang VUIFILMFEST 2024', description: 'Film dokumenter karya mahasiswa Produksi Media UI.', mediaType: 'film' },
    { id: 'Drawn To You', title: 'Drawn To You', category: 'Film', type: 'film', status: 'Film pendek', description: 'Film pendek buatan mahasiswa Produksi Media UI.', igLink: null },
    { id: 'Kita Perbaiki', title: 'Kita Perbaiki', category: 'Film', type: 'film', status: 'Film pendek', description: 'Film pendek buatan mahasiswa Produksi Media UI.', mediaType: 'film', igLink: null },
    { id: 'Masih Bingung', title: 'Masih Bingung', category: 'Film', type: 'film', status: 'Film pendek', description: 'Film pendek buatan mahasiswa Produksi Media UI.', mediaType: 'film', igLink: null },
    { id: 'room308', title: 'Room 308', category: 'Game - Horror', type: 'game', status: 'Selesai', description: 'Game horror buatan mahasiswa Produksi Media UI.', mediaType: 'game' },
    { id: 'ard', title: 'Animal Resource Department', category: 'Game - Simulasi', type: 'game', status: 'Selesai', description: 'Game simulasi buatan mahasiswa Produksi Media UI.', mediaType: 'game' },
    { id: 'lodayaconquest', title: 'Lodaya Conquest', category: 'Game - Adventure', type: 'game', status: 'Selesai', description: 'Game adventure buatan mahasiswa Produksi Media UI.', mediaType: 'game' },
    { id: 'pilahsampah', title: 'Yuk Pilah Sampah Game Edukasi', category: 'Game - Edukasi', type: 'game', status: 'Rilis di Play Store', description: 'Game edukasi mengenai sampah.', mediaType: 'game', playStoreLink: 'https://play.google.com/store/apps/details?id=com.oxlab.yukpilahsampah' },
];

const worksList = document.getElementById('worksList');
const scrollLeftBtn = document.getElementById('scrollLeft');
const scrollRightBtn = document.getElementById('scrollRight');
const scrollAmount = 240; 
let currentFilter = 'all';

function renderWorksList(filter = 'all') {
    // MODIFIED: Intercept 'music' filter to show modal instead
    if (filter === 'music') {
        showMusicChoiceModal();
        // Highlight the button manually since we're not running the standard render
        document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
        document.getElementById('musicTab').classList.add('active');
        return; 
    }

    worksList.innerHTML = '';
    const filteredData = worksData.filter(work => filter === 'all' || work.type === filter);
      
    if (filteredData.length === 0) {
        worksList.innerHTML = '<p style="color:var(--muted); text-align:center; width:100%;">Tidak ada karya dalam kategori ini.</p>';
        scrollLeftBtn.style.display = 'none';
        scrollRightBtn.style.display = 'none';
        return;
    }
      
    scrollLeftBtn.style.display = 'block';
    scrollRightBtn.style.display = 'block';

    filteredData.forEach(work => {
        const wrapper = document.createElement('div');
        wrapper.classList.add('work-card-wrapper');
        wrapper.dataset.id = work.id;
        wrapper.onclick = () => navigateToPage('work-detail', work.id);

        const shortDesc = work.description.substring(0, 70) + (work.description.length > 70 ? '...' : '');
        const categoryDisplay = work.category.split(' - ')[0];

        // Generate thumbnail URL
        let thumbUrl = '';
        if(work.youtubeId) thumbUrl = `https://img.youtube.com/vi/${work.youtubeId}/mqdefault.jpg`;

        // Use thumbnail if available for cover
        const coverContent = thumbUrl ? `<img src="${thumbUrl}" style="width:100%; height:100%; object-fit:cover;">` : `Cover ${work.title}`;

        wrapper.innerHTML = `
            <div class="work-card">
                <div class="work-card-info">
                    <h4>${work.title}</h4>
                    <p>${categoryDisplay}</p>
                    <p>${shortDesc}</p>
                </div>
                <div class="work-card-image">${coverContent}</div>
                <div class="work-card-caption">${work.title}</div>
            </div>
        `;
        worksList.appendChild(wrapper);
    });
    worksList.scrollLeft = 0;
    checkScrollPosition();
}

// --- NEW FUNCTIONS FOR SPIN WHEEL (SINGLE FRAME STYLE) ---

function showMusicChoiceModal() {
    document.getElementById('musicChoiceModal').style.display = 'flex';
}

function showManualMusic() {
    document.getElementById('musicChoiceModal').style.display = 'none';
    // Manually render music list bypassing the interceptor
    worksList.innerHTML = '';
    const filteredData = worksData.filter(work => work.type === 'music');
    
    scrollLeftBtn.style.display = 'block';
    scrollRightBtn.style.display = 'block';

    filteredData.forEach(work => {
        const wrapper = document.createElement('div');
        wrapper.classList.add('work-card-wrapper');
        wrapper.dataset.id = work.id;
        wrapper.onclick = () => navigateToPage('work-detail', work.id);
        
        const shortDesc = work.description.substring(0, 70) + (work.description.length > 70 ? '...' : '');
        const categoryDisplay = work.category.split(' - ')[0];
        
        let thumbUrl = '';
        if(work.youtubeId) thumbUrl = `https://img.youtube.com/vi/${work.youtubeId}/mqdefault.jpg`;
        const coverContent = thumbUrl ? `<img src="${thumbUrl}" style="width:100%; height:100%; object-fit:cover;">` : `Cover ${work.title}`;

        wrapper.innerHTML = `
            <div class="work-card">
                <div class="work-card-info">
                    <h4>${work.title}</h4>
                    <p>${categoryDisplay}</p>
                    <p>${shortDesc}</p>
                </div>
                <div class="work-card-image">${coverContent}</div>
                <div class="work-card-caption">${work.title}</div>
            </div>
        `;
        worksList.appendChild(wrapper);
    });
    worksList.scrollLeft = 0;
    checkScrollPosition();
}

function startSpinUI() {
    document.getElementById('musicChoiceModal').style.display = 'none';
    document.getElementById('spinWheelOverlay').style.display = 'flex';
    
    // Initialize display with a placeholder using the new layout
    const leftScreen = document.getElementById('spinScreenLeft');
    const rightScreen = document.getElementById('spinScreenRight');
    
    leftScreen.innerHTML = `
        <div style="width:180px; height:180px; background:#222; display:flex; align-items:center; justify-content:center; border-radius:12px; border:2px solid #444; box-shadow:0 10px 30px rgba(0,0,0,0.5);">
            <i class="fas fa-music" style="font-size:60px; color:#555;"></i>
        </div>
    `;

    rightScreen.innerHTML = `
        <h2>Ready?</h2>
        <h3>Tekan Tombol Play di Kanan Bawah</h3>
        <p>---</p>
    `;
    
    // Reset button state
    const btn = document.getElementById('btnSpinTrigger');
    btn.disabled = false;
}

function closeSpinUI() {
    document.getElementById('spinWheelOverlay').style.display = 'none';
}

function spinTheWheel() {
    const btn = document.getElementById('btnSpinTrigger');
    const musicItems = worksData.filter(w => w.type === 'music');
    
    if (musicItems.length === 0) return;

    btn.disabled = true;
    // Optional: Add spinning icon to the big button, but keeping it simple for the metal look
    // btn.innerHTML = '<i class="fas fa-sync fa-spin"></i>'; 
    
    // Animation variables
    let duration = 3000; // 3 seconds spin
    let intervalTime = 100; // Change every 100ms
    let elapsedTime = 0;
    let finalItem = null;

    const shuffleInterval = setInterval(() => {
        // Pick random item for visual shuffle
        const randomIndex = Math.floor(Math.random() * musicItems.length);
        const item = musicItems[randomIndex];
        
        updateSpinDisplay(item, false); // false = temporary state
        
        elapsedTime += intervalTime;
        
        // Slow down near end
        if (elapsedTime > duration - 1000) {
            // intervalTime += 50; // Logic to slow down interval is complex here without recursive timeout, simplified to constant speed then stop
        }
        
        if (elapsedTime >= duration) {
            clearInterval(shuffleInterval);
            // Final Selection
            const finalIndex = Math.floor(Math.random() * musicItems.length);
            finalItem = musicItems[finalIndex];
            updateSpinDisplay(finalItem, true);
            
            // Auto open detail after a moment
            setTimeout(() => {
                closeSpinUI();
                showWorkDetail(finalItem.id);
            }, 1500);
        }
    }, intervalTime);
}

function updateSpinDisplay(item, isFinal) {
    const leftScreen = document.getElementById('spinScreenLeft');
    const rightScreen = document.getElementById('spinScreenRight');
    
    let thumbUrl = '';
    if(item.youtubeId) thumbUrl = `https://img.youtube.com/vi/${item.youtubeId}/hqdefault.jpg`;
    
    // Update Left Screen (Image)
    leftScreen.innerHTML = `<img src="${thumbUrl}" alt="${item.title}" style="animation: fadeIn 0.1s;">`;

    // Update Right Screen (Text)
    const artistName = item.category.split(' - ')[0];
    // Highlight color for final result
    const titleColor = isFinal ? '#ffd24d' : 'white';

    rightScreen.innerHTML = `
        <h2 style="color:${titleColor}; animation: fadeIn 0.1s;">${artistName}</h2>
        <h3 style="animation: fadeIn 0.1s;">${item.title}</h3>
        <p style="animation: fadeIn 0.1s;">Track Recording - ${isFinal ? 'Selected' : 'Scanning...'}</p>
    `;
}


function showWorkDetail(workId) {
    const work = worksData.find(w => w.id === workId);
    if (!work) return;

    document.getElementById('workDetailTitle').textContent = work.title;
    document.getElementById('workDetailCategory').textContent = work.category;
    document.getElementById('workDetailStatus').textContent = work.status;
    document.getElementById('workDetailDescription').textContent = work.description || "Deskripsi karya ini akan segera diperbarui.";

    const mediaContainer = document.getElementById('workMediaContainer');
    const footerContainer = document.getElementById('workDetailFooter');
    footerContainer.innerHTML = '';

    if (work.mediaType === 'music' && work.youtubeId) {
        mediaContainer.style.display = 'block';
        const embedUrl = `https://www.youtube.com/embed/${work.youtubeId}?autoplay=1&rel=0`;
        mediaContainer.innerHTML = `<iframe src="${embedUrl}" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
    } else if (work.youtubeId) {
        mediaContainer.style.display = 'block';
        const embedUrl = `https://www.youtube.com/embed/${work.youtubeId}?rel=0`;
        mediaContainer.innerHTML = `<iframe src="${embedUrl}" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
    } else {
        mediaContainer.style.display = 'none';
        mediaContainer.innerHTML = '';
    }

    if (work.youtubeLink) footerContainer.innerHTML += `<a href="${work.youtubeLink}" target="_blank"><i class="fab fa-youtube"></i> YouTube</a>`;
    if (work.igLink) footerContainer.innerHTML += `<a href="${work.igLink}" target="_blank"><i class="fab fa-instagram"></i> Instagram</a>`;
    if (work.playStoreLink) footerContainer.innerHTML += `<a href="${work.playStoreLink}" target="_blank"><i class="fas fa-external-link-alt"></i> Lihat di Sini</a>`;

    navigateToPage('work-detail');
}

document.querySelectorAll('.tab-button').forEach(button => {
    button.addEventListener('click', function() {
        if (this.dataset.filter !== 'music') { 
             document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
             this.classList.add('active');
        }
        
        currentFilter = this.dataset.filter;
        renderWorksList(currentFilter);
    });
});

function checkScrollPosition() {
    scrollLeftBtn.disabled = worksList.scrollLeft === 0;
    scrollRightBtn.disabled = worksList.scrollLeft + worksList.clientWidth >= worksList.scrollWidth - 1;
}
scrollLeftBtn.addEventListener('click', () => {
    worksList.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
    setTimeout(checkScrollPosition, 400); 
});
scrollRightBtn.addEventListener('click', () => {
    worksList.scrollBy({ left: scrollAmount, behavior: 'smooth' });
    setTimeout(checkScrollPosition, 400);
});
document.addEventListener('DOMContentLoaded', () => {
    if (document.getElementById('worksList')) {
        renderWorksList(currentFilter);
    }
});
worksList.addEventListener('scroll', checkScrollPosition);


// EVENTS & CALENDAR
const eventsData = [
    { id: 'prorientation', name: 'Prorientation', dates: [new Date('2025-08-21'), new Date('2025-11-03')], monthDisplay: 'Agustus - November', place: 'Auditorum Vokasi', organizer: 'HIMPRODIA UI', description: 'Prorientation adalah suatu acara Masa Bimbingan Produksi Media.', ig: 'prorientation.ui', igLink: 'https://www.instagram.com/prorientation.ui?igsh=NjZoOWhzOGdxejR0' },
    { id: 'promed_olympic', name: 'Promed Olympic', dates: [new Date('2025-10-31'), new Date('2025-11-12')], monthDisplay: 'Oktober - November', place: 'Wira Yudha', organizer: 'Departemen Olahraga HIMPRODIA UI', description: 'Promed Olympic merupakan ajang perlombaan olahraga.', ig: 'promed.olympic', igLink: 'https://www.instagram.com/promed.olympic?igsh=MWhyMWFoaWozdWFhZA==' },
    { id: 'promed_sejalan', name: 'Promed Sejalan', dates: [new Date('2025-11-11')], monthDisplay: 'November', place: 'Kantin Vokasi', organizer: 'Departemen Seni Budaya HIMPRODIA UI', description: 'Sejalan adalah suatu acara yang memberikan ruang apresiasi seniman jalanan.', ig: 'promed.sejalan', igLink: 'https://www.instagram.com/promed.sejalan?igsh=MTc5d3JycWZkZmx1ag==' },
    { id: 'etopia', name: 'ETOPIA', dates: [new Date('2025-11-05')], monthDisplay: 'November', place: 'Auditorium Pusgiwa UI', organizer: 'Departemen Olahraga HIMPRODIA UI', description: 'Etopia adalah sebuah acara tournament esports.', ig: 'etopia.ui', igLink: 'https://www.instagram.com/etopia.ui?igsh=MTN6c2doaHRtN3A1ZQ==' },
    { id: 'promed_mengajar', name: 'Promed Mengajar', dates: [new Date('2025-11-10'), new Date('2025-11-12')], monthDisplay: 'November', place: 'SMA Pemuka Depok', organizer: 'Departemen Sosial dan Masyarakat', description: 'Promed Mengajar merupakan program kerja pengabdian masyarakat.', ig: 'promed.megajar', igLink: 'https://www.instagram.com/mediaexperience.ui?igsh=ZTZuMno0bm03cWk1' },
    { id: 'media_experience', name: 'Media Experience', dates: [new Date('2025-11-20')], monthDisplay: 'November', place: 'Makara Art Center', organizer: 'Departemen Seni Budaya', description: 'Media Experience adalah sebuah ajang apresiasi karya mahasiswa.', ig: 'mediaexperience.ui', igLink: 'https://www.instagram.com/mediaexperience.ui?igsh=ZTZuMno0bm03cWk1' },
    { id: 'promates_market', name: 'Promates Market', dates: [new Date('2025-11-20')], monthDisplay: 'November', place: 'TBA', organizer: 'Departemen Ekonomi', description: 'Promates Market merupakan pasar preloved.', ig: 'promates.market', igLink: 'https://www.instagram.com/promates.market?igsh=MTRkdndycnJ2cDd0ZQ==' }
];

const calendarDates = document.getElementById('calendarDates');
const monthYearTitle = document.getElementById('monthYearTitle');
const prevMonthBtn = document.getElementById('prevMonth');
const nextMonthBtn = document.getElementById('nextMonth');
const eventListContainer = document.getElementById('eventList');
const monthNames = ["Juli", "Agustus", "September", "Oktober", "November", "Desember"];
const startMonth = 7; // Juli
const endMonth = 12;  // Desember
let currentMonthIndex = 0;

function getEventDates(eventId) {
    const event = eventsData.find(e => e.id === eventId);
    if (!event) return '';
    const dates = event.dates.map(d => new Date(d.getTime()));
    if (dates.length === 1) return dates[0].toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });
    
    // Logic sederhana untuk rentang
    const startDate = dates[0].toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });
    const endDate = dates[dates.length - 1].toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });
    return `${startDate} - ${endDate}`;
}

function showEventDetail(eventId) {
    const event = eventsData.find(e => e.id === eventId);
    if (!event) return;
    document.getElementById('detailTitle').textContent = event.name;
    document.getElementById('detailDate').textContent = getEventDates(eventId);
    document.getElementById('detailPlace').textContent = event.place;
    document.getElementById('detailOrganizer').textContent = event.organizer;
    document.getElementById('detailDescription').textContent = event.description;
    document.getElementById('detailIgName').textContent = event.ig;
    document.getElementById('detailIgLink').href = event.igLink;
    navigateToPage('event-detail');
}

function renderCalendar(monthOffset) {
    const year = 2025;
    const month = startMonth + monthOffset;
    if (month < startMonth || month > endMonth) return;

    const date = new Date(year, month - 1, 1);
    const lastDay = new Date(year, month, 0).getDate();
    const firstDayIndex = date.getDay() === 0 ? 6 : date.getDay() - 1; 

    monthYearTitle.textContent = `${monthNames[month - startMonth]} ${year}`;
    calendarDates.innerHTML = '';
    prevMonthBtn.disabled = month === startMonth;
    nextMonthBtn.disabled = month === endMonth;

    for (let i = 0; i < firstDayIndex; i++) {
        const emptyCell = document.createElement('div');
        emptyCell.classList.add('calendar-date', 'inactive');
        calendarDates.appendChild(emptyCell);
    }

    for (let day = 1; day <= lastDay; day++) {
        const dayCell = document.createElement('div');
        dayCell.classList.add('calendar-date');
        dayCell.textContent = day;

        const currentDate = new Date(year, month - 1, day);
        currentDate.setHours(0, 0, 0, 0);

        const hasEvent = eventsData.some(event => {
            const isSingleDate = event.dates.length === 1 && event.dates[0].getTime() === currentDate.getTime();
            const isInRange = event.dates.length > 1 && currentDate >= event.dates[0] && currentDate <= event.dates[event.dates.length - 1];
            return isSingleDate || isInRange;
        });

        if (hasEvent) {
            dayCell.classList.add('event-date');
            const eventDot = document.createElement('div');
            eventDot.classList.add('event-dot');
            dayCell.appendChild(eventDot);
             
            dayCell.dataset.date = `${year}-${month}-${day}`;
            dayCell.addEventListener('click', (e) => {
                const clickedDate = e.target.dataset.date;
                const relevantEvents = eventsData.filter(event => {
                    return event.dates.some(d => {
                          // Logic simplified for brevity
                          return true; // Needs proper date check in full logic
                    });
                });
                // For demo, just pick first relevant if exists, or find specific
                const found = eventsData.find(ev => ev.dates.some(d => d.getDate() == day && d.getMonth() == (month-1)));
                if(found) showEventDetail(found.id);
            });
        }
        calendarDates.appendChild(dayCell);
    }
    renderEventList(month, year);
}

function renderEventList(month, year) {
    eventListContainer.innerHTML = '';
    const eventsForList = [];
    eventsData.forEach(event => {
        const isRelevant = event.dates.some(date => date.getFullYear() === year && date.getMonth() === month - 1);
        if (isRelevant && !eventsForList.some(e => e.id === event.id)) {
             eventsForList.push(event);
        }
    });

    if (eventsForList.length === 0) {
        eventListContainer.innerHTML = '<p style="color:var(--muted); text-align:center;">Tidak ada kegiatan terjadwal di bulan ini.</p>';
        return;
    }
    eventsForList.sort((a, b) => a.dates[0] - b.dates[0]);

    eventsForList.forEach(event => {
        const item = document.createElement('div');
        item.classList.add('event-item');
        item.dataset.id = event.id;
        item.innerHTML = `<h4>${event.name}</h4><p>${getEventDates(event.id)} | ${event.place.split(',')[0]}</p>`;
        item.addEventListener('click', () => showEventDetail(event.id));
        eventListContainer.appendChild(item);
    });
}

prevMonthBtn.addEventListener('click', () => {
    if (currentMonthIndex > 0) {
        currentMonthIndex--;
        renderCalendar(currentMonthIndex);
    }
});
nextMonthBtn.addEventListener('click', () => {
    if (currentMonthIndex < monthNames.length - 1) {
        currentMonthIndex++;
        renderCalendar(currentMonthIndex);
    }
});
renderCalendar(currentMonthIndex);
</script>
</body>  
</html>